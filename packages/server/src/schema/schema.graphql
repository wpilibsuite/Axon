scalar DateTime
scalar Upload

type Query {
  isDockerConnected: Boolean!

  dataset(id: ID!): Dataset
  datasets: [Dataset!]!
  project(id: ID!): Project
  projects: [Project!]!
}

type Mutation {
  createDataset(upload: Upload!): Dataset
  createProject(name: String!): Project

  startTraining(id: ID!): Project
  haltTraining(id: ID!): Project
}

type Size {
  width: Int!
  height: Int!
}

type Point {
  x: Int!
  y: Int!
}

type ObjectLabel {
  className: String!
  points: [Point!]!
}

type LabeledImage {
  path: String!
  size: Size!
  tags: [String!]!
  object_labels: [ObjectLabel!]!
}

type Dataset {
  id: ID!
  dateAdded: DateTime!
  name: String!
  path: String!

  classes: [String!]!
  tags: [String!]!

  images: [LabeledImage!]!
}

type TrainingMetrics {
  loss: Float
  precision: Float
  intersectionOverUnion: Float
}

type Checkpoint {
  step: Int
  metrics: TrainingMetrics
}

type Project {
  id: ID!
  name: String!
  hyperparameters: Hyperparameters

  inProgress: Boolean
  checkpoints: [Checkpoint]
}

type Hyperparameters {
  name: String
  epochs: Int
  batchsize: Int
  evalfrequency: Int
  checkpoint: String
  datasetpath: String
  percenteval: Int
}
